if (self.CavalryLogger) { CavalryLogger.start_js(["SdXRN"]); }

__d('ReactComposerDraftCleared',['ReactComposerStatusStore'],(function a(b,c,d,e,f,g){var h={},i={},j={setupDraftClearedListener:function k(l){j.cleanupDraftClearedListener(l);i[l]=false;h[l]=c('ReactComposerStatusStore').addChangeListener(function(){if(!c('ReactComposerStatusStore').getMessageText(l)){i[l]=true;j.cleanupDraftClearedListener(l);}});},cleanupDraftClearedListener:function k(l){if(h[l]){h[l].remove();delete h[l];}},hasDraftCleared:function k(l){return i[l];}};f.exports=j;}),null);
__d('ReactComposerDraftLoad',['fbt','ReactComposerActions','ReactComposerAttachmentActions','ReactComposerDraftDelete','ReactComposerDraftEventLogger','ReactComposerDraftGet','ReactComposerPrefillUtils','ReactComposerTaggerType','SearchableEntry'],(function a(b,c,d,e,f,g,h){var i={loadDraft:function j(k,l,m,n){var o=i._getDraftPrefillConfig(k,l,m);if(n&&o&&n!==o.selectedAttachment)return;o&&c('ReactComposerPrefillUtils').prefill(l,o);if(o&&o.selectedAttachment){c('ReactComposerAttachmentActions').selectAttachment(l,o.selectedAttachment,true);c('ReactComposerActions').collapseSprouts(l);}},_getDraftPrefillConfig:function j(k,l,m){try{var n=c('ReactComposerDraftGet').getDraft(k);if(n){i._convertObjectToSearchableEntry(n.prefillConfig.taggersData);return n.prefillConfig;}else c('ReactComposerDraftDelete').deleteDraft(k);}catch(p){var o=h._("Sorry, we cannot retrieve your draft.");alert(o);c('ReactComposerDraftEventLogger').log('error_retrieve_draft',m);}return null;},_convertObjectToSearchableEntry:function j(k){if(k[c('ReactComposerTaggerType').ACTIVITY].action&&k[c('ReactComposerTaggerType').ACTIVITY].object){k[c('ReactComposerTaggerType').ACTIVITY].action=new (c('SearchableEntry'))(k[c('ReactComposerTaggerType').ACTIVITY].action);k[c('ReactComposerTaggerType').ACTIVITY].object=new (c('SearchableEntry'))(k[c('ReactComposerTaggerType').ACTIVITY].object);}if(k[c('ReactComposerTaggerType').LOCATION].place)k[c('ReactComposerTaggerType').LOCATION].place=new (c('SearchableEntry'))(k[c('ReactComposerTaggerType').LOCATION].place);k[c('ReactComposerTaggerType').PEOPLE].forEach(function(l,m,n){n[m]=new (c('SearchableEntry'))(l);});}};f.exports=i;}),null);
__d('ReactComposerDraftController.react',['Arbiter','React','ReactComposerAttachmentType','ReactComposerContextMixin','ReactComposerDraftCleared','ReactComposerDraftDelete','ReactComposerDraftEventLogger','ReactComposerDraftGet','ReactComposerDraftLoad','ReactComposerEvents','SubscriptionsHandler'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerDraftController',_subscriptionsHandler:undefined,_hadStatusDraft:false,mixins:[c('ReactComposerContextMixin')],componentWillMount:function i(){this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(c('Arbiter').subscribe([c('ReactComposerEvents').POST_SUCCEEDED+this.context.composerID,c('ReactComposerEvents').OPTIMISTIC_POSTING_STARTED+this.context.composerID],function(){c('ReactComposerDraftDelete').deleteDraft(this.context.actorID);if(this._hadStatusDraft){if(c('ReactComposerDraftCleared').hasDraftCleared(this.context.composerID)){c('ReactComposerDraftEventLogger').log('draft_not_used',this.context.gks);}else c('ReactComposerDraftEventLogger').log('draft_used',this.context.gks);this._hadStatusDraft=false;}}.bind(this)));},componentWillUnmount:function i(){this._subscriptionsHandler&&this._subscriptionsHandler.release();c('ReactComposerDraftCleared').cleanupDraftClearedListener(this.context.composerID);},render:function i(){return this.props.children;},init:function i(j){c('ReactComposerDraftLoad').loadDraft(this.context.actorID,this.context.composerID,this.context.gks,j);var k=c('ReactComposerDraftGet').getDraft(this.context.actorID),l=k&&k.prefillConfig;this._hadStatusDraft=!!(l&&l.selectedAttachment&&l.selectedAttachment===c('ReactComposerAttachmentType').STATUS&&l.mentionsInput.textWithEntities.text);c('ReactComposerDraftCleared').setupDraftClearedListener(this.context.composerID);}});f.exports=h;}),null);
__d('ReactComposerSproutsLiveVideoSelector.react',['ix','fbt','React','ReactComposerAttachmentType','ReactComposerLoggingName','ReactComposerSproutsSelector.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.defaultProps={onSelected:function r(){}},n;}l.prototype.render=function(){return c('React').createElement(c('ReactComposerSproutsSelector.react'),{attachmentID:c('ReactComposerAttachmentType').LIVE_VIDEO,loggingName:c('ReactComposerLoggingName').LIVE_VIDEO_TAB_SELECTOR,icon:h("123206"),label:i._("Live Video"),onSelected:this.props.onSelected,dataTestID:'react-composer-live-video-selector-react'});};f.exports=l;}),null);
__d('ReactComposerSproutsLiveVideoDialogSelector.react',['Arbiter','Bootloader','React','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextConfig','ReactComposerEvents','ReactComposerLoggingName','ReactComposerSproutsLiveVideoSelector.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$ReactComposerSproutsLiveVideoDialogSelector1=function(){c('ReactComposerAttachmentActions').selectAttachment(this.props.contextConfig.composerID,c('ReactComposerAttachmentType').LIVE_VIDEO,true,c('ReactComposerLoggingName').LIVE_VIDEO_TAB_SELECTOR);setTimeout(function(){return c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID);}.bind(this),0);c('Bootloader').loadModules(["LiveVideoBroadcastUtils"],function(p){return p.startPreviewUI(this.props.contextConfig,this.props.config);}.bind(this),'ReactComposerSproutsLiveVideoDialogSelector.react');}.bind(this),l;}j.prototype.render=function(){return c('React').createElement(c('ReactComposerSproutsLiveVideoSelector.react'),{onSelected:this.$ReactComposerSproutsLiveVideoDialogSelector1});};f.exports=j;}),null);
__d('ReactComposerSproutsPostToGroupsSelector.react',['ix','cx','fbt','React','ReactComposerGroupSelectorTabContainerGatedModule','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactComposerGroupSelectorTabContainerGatedModule').module;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){if(m){var o=j._("Post to Group"),p=h("123072");return c('React').createElement('span',{key:'group_selector',className:"_sg1"},c('React').createElement(m,{label:o,icon:p}));}return null;};function n(){k.apply(this,arguments);}f.exports=n;}),null);
__d('ReactFeedSproutsComposerX.react',['cx','Arbiter','BootloadedComponent.react','JSResource','LitestandComposer','React','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerAudienceSelectorLazyAttachmentGatedModule','ReactComposerAudienceSelectorNextButtonContainerGatedModule','ReactComposerBodyContainer.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerDraftController.react','ReactComposerEvents','ReactComposerFeedMediaPostButtonContainer.react','ReactComposerFeedPostButtonContainer.react','ReactComposerGroupSearchTypeaheadContainerGatedModule','ReactComposerGroupSelectorTabContainerGatedModule','ReactComposerHeaderContainer.react','ReactComposerLiveVideoLazyAttachment.react','ReactComposerLiveVideoPreviewButton.react','ReactComposerLoggingName','ReactComposerMediaEagerAttachment.react','ReactComposerPrefillConfig','ReactComposerQAndALazyAttachment.react','ReactComposerSproutsAlbumSelector.react','ReactComposerSproutsLiveVideoDialogSelector.react','ReactComposerSproutsLiveVideoSelector.react','ReactComposerSproutsPostToGroupsSelector.react','ReactComposerSproutsQAndASelector.react','ReactComposerSproutsStatusAndMediaSelector.react','ReactComposerStatusEagerAttachment.react','ReactComposerTaggerActions','ReactComposerTaggerType','ReactComposerWithSprouts.react'],(function a(b,c,d,e,f,g,h){var i=c('ReactComposerAudienceSelectorLazyAttachmentGatedModule').module,j=c('ReactComposerAudienceSelectorNextButtonContainerGatedModule').module,k=c('ReactComposerGroupSearchTypeaheadContainerGatedModule').module,l=c('ReactComposerGroupSelectorTabContainerGatedModule').module,m=c('React').createClass({displayName:'ReactFeedSproutsComposerX',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired,prefillConfig:c('ReactComposerPrefillConfig')},componentDidMount:function n(){c('LitestandComposer').initComposer(this.props.contextConfig.composerID);var o=this.props.prefillConfig;if(o&&o.selectedAttachment){c('ReactComposerAttachmentActions').selectAttachment(this.props.contextConfig.composerID,o.selectedAttachment,o.shouldActivateSelectedAttachment);if(o.shouldActivateSelectedAttachment)c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID);}if(o&&o.selectedTagger)c('ReactComposerTaggerActions').selectTagger(this.props.contextConfig.composerID,c('ReactComposerLoggingName').OTHERS,o.selectedTagger);var p=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];if(p.enableDrafts){var q=o?o.selectedAttachment:null;this.refs.draftController.init(q);}},render:function n(){var o=this.props.prefillConfig,p=this._getAttachmentComponents(),q=p[0],r=p[1],s=c('React').createElement(c('ReactComposerWithSprouts.react'),{defaultAttachmentOnExpand:c('ReactComposerAttachmentType').STATUS,innerProps:{className:"_5n2b",loggingConfig:this.props.config.loggingConfig},expandOnInit:o&&o.expandSproutsOnInit},c('React').createElement(c('ReactComposerHeaderContainer.react'),this.props,q),this._renderGroupSearchTypeahead(),this._renderFunFactTypeahead(),c('React').createElement(c('ReactComposerBodyContainer.react'),{expanded:this.props.config.showExpandedComposer},r)),t=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];if(t.enableDrafts)s=c('React').createElement(c('ReactComposerDraftController.react'),{ref:'draftController'},s);return s;},_renderHeader:function n(){var o=this.props.config.attachmentsConfig,p=[];if(o[c('ReactComposerAttachmentType').STATUS].enabled){var q=[];if(!o[c('ReactComposerAttachmentType').LIVE_VIDEO].enabled)q.push(c('ReactComposerAttachmentType').LIVE_VIDEO);p.push(c('React').createElement(c('ReactComposerSproutsStatusAndMediaSelector.react'),{key:c('ReactComposerLoggingName').STATUS_TAB_SELECTOR,alternativeAttachmentIDs:q}));if(l)p.push(c('React').createElement(c('ReactComposerSproutsPostToGroupsSelector.react'),{key:c('ReactComposerLoggingName').GROUP_SELECTOR}));}var r=this.props.contextConfig.gks&&this.props.contextConfig.gks.hideAlbumTab;if(o[c('ReactComposerAttachmentType').ALBUM].enabled&&!r){var s=this.props.contextConfig.gks&&this.props.contextConfig.gks.albumTabUsesSelector;p.push(c('React').createElement(c('ReactComposerSproutsAlbumSelector.react'),{key:c('ReactComposerLoggingName').ALBUM,config:this.props.config,useCollectionSelector:s}));}if(o[c('ReactComposerAttachmentType').LIVE_VIDEO].enabled&&o[c('ReactComposerAttachmentType').LIVE_VIDEO].composerDialog){p.push(c('React').createElement(c('ReactComposerSproutsLiveVideoDialogSelector.react'),{key:c('ReactComposerLoggingName').LIVE_VIDEO_TAB_SELECTOR,contextConfig:this.props.contextConfig,config:this.props.config}));}else if(o[c('ReactComposerAttachmentType').LIVE_VIDEO].enabled)p.push(c('React').createElement(c('ReactComposerSproutsLiveVideoSelector.react'),{key:c('ReactComposerLoggingName').LIVE_VIDEO_TAB_SELECTOR}));if(o[c('ReactComposerAttachmentType').QANDA].enabled)p.push(c('React').createElement(c('ReactComposerSproutsQAndASelector.react'),{key:c('ReactComposerLoggingName').QANDA_TAB_SELECTOR}));return p;},_getAttachmentComponents:function n(){var o=this._renderHeader(),p=[];p.push(this._renderStatusAttachment());p.push(this._renderMediaAttachment());p.push(this._renderLiveVideoAttachment());var q=this._renderQAndAAttachment();if(q)p.push(q);var r=this._renderAudienceSelectorAttachment();if(r)p.push(r);p.push();return [o,p];},_renderStatusAttachment:function n(){var o=this._getSelectedAttachmentType()===c('ReactComposerAttachmentType').STATUS,p=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS].placeholderText;return c('React').createElement(c('ReactComposerStatusEagerAttachment.react'),{key:'status',config:this.props.config,prefillConfig:this.props.prefillConfig,selected:o,postButtonModule:j?j:c('ReactComposerFeedPostButtonContainer.react'),placeholder:p});},_renderMediaAttachment:function n(){var o=this._getSelectedAttachmentType()===c('ReactComposerAttachmentType').MEDIA;return c('React').createElement(c('ReactComposerMediaEagerAttachment.react'),{key:'media',config:this.props.config,postButtonModule:j?j:c('ReactComposerFeedMediaPostButtonContainer.react'),selected:o});},_renderLiveVideoAttachment:function n(){var o=this._getSelectedAttachmentType()===c('ReactComposerAttachmentType').LIVE_VIDEO;return c('React').createElement(c('ReactComposerLiveVideoLazyAttachment.react'),{key:'live_video',config:this.props.config,postButtonModule:c('ReactComposerLiveVideoPreviewButton.react'),selected:o});},_renderQAndAAttachment:function n(){if(!this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').QANDA].enabled)return null;return c('React').createElement(c('ReactComposerQAndALazyAttachment.react'),{key:'qanda',config:this.props.config});},_renderAudienceSelectorAttachment:function n(){var o=this._getSelectedAttachmentType()===c('ReactComposerAttachmentType').AUDIENCE_SELECTOR;return i?c('React').createElement(i,{key:'audience_selector',config:this.props.config,selected:o}):null;},_renderGroupSearchTypeahead:function n(){return k?c('React').createElement(k,null):null;},_renderFunFactTypeahead:function n(){var o=this.props.config,p=o.taggersConfig,q=o.loggingConfig;if(p&&p[c('ReactComposerTaggerType').FUN_FACT]&&p[c('ReactComposerTaggerType').FUN_FACT].enabled){var r=[];if(p[c('ReactComposerTaggerType').FORMATTED_TEXT])r=p[c('ReactComposerTaggerType').FORMATTED_TEXT].textFormats;return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ReactComposerFunFactTaggerContainer.react').__setRef('ReactFeedSproutsComposerX.react'),bootloadPlaceholder:c('React').createElement('div',null),satpFormats:r,surface:q?q.composerSourceSurface:null});}return null;},_getSelectedAttachmentType:function n(){var o=this.props.prefillConfig;return o&&o.selectedAttachment?o.selectedAttachment:c('ReactComposerAttachmentType').STATUS;}});f.exports=m;}),null);
__d('ReactFeedSproutsComposerXBootloader',['csx','Arbiter','AsyncRequest','Bootloader','CSS','DOM','Event','PUWMethods','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerEvents','ReactComposerInit','ReactComposerLoggingName','ReactComposerPrefillUtils','ReactComposerPromptsStore','ReactFeedSproutsComposerX.react','ReactInputSelection','Run','SubscriptionsHandler','XReactComposerLoggingODSController','$','ge','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i=void 0,j={_inputDOMs:[],_fileInputSubscriptions:c('SubscriptionsHandler'),_prefillSubscription:null,bootload:function k(l,m){var n=c('$')('feedx_sprouts_container'),o=c('DOM').find(n,"._559p"),p=c('CSS').hasClass(o,'async_saving');if(p){i=new (c('SubscriptionsHandler'))();i.addSubscriptions(c('Event').listen(o,'success',function(){this._bootloadImpl(l,n,m);}.bind(this)),c('Event').listen(o,'error',function(){this._bootloadImpl(l,n,m);}.bind(this)));}else this._bootloadImpl(l,n,m);c('Run').onLeave(this._cleanup.bind(this));},_bootloadImpl:function k(l,m,n){n.config.audienceXHP=this._getXHPToReactNode(m,"._ej0");var o=c('DOM').scry(m,"._16ve")[0],p=c('DOM').scry(o,'input[name="composer_photo[]"]'),q=c('ReactComposerAttachmentType').STATUS;this._subscriptions=new (c('SubscriptionsHandler'))();for(var r=0;r<p.length;r++){var s=p[r];if(s){this._inputDOMs.push(s);var t=this._inputDOMs.length-1;this._subscriptions.addSubscriptions(c('Event').listen(this._inputDOMs[t],'change',function(w){var x=w.target;if(x.files&&x.files.length>0){this._uploadExistingFiles(x.files,l,n);c('ReactComposerAttachmentActions').selectAttachment(l,c('ReactComposerAttachmentType').MEDIA,true,c('ReactComposerLoggingName').MEDIA_SPROUT);}}.bind(this)));if(s.files&&s.files.length>0){q=c('ReactComposerAttachmentType').MEDIA;this._uploadExistingFiles(s.files,l,n);}}}var u=c('DOM').scry(m,"._5qtn")[0];if(u&&u.getAttribute('data-attachment-type')===c('ReactComposerAttachmentType').LIVE_VIDEO)q=c('ReactComposerAttachmentType').LIVE_VIDEO;var v=o.getAttribute('data-selected-sprout-id');n.prefillConfig=Object.assign(n.prefillConfig,this._appendPrefillConfig(m,l,q,v));if(n.prefillConfig){this._prefillSubscription=c('Arbiter').subscribeOnce(c('ReactComposerEvents').SET_PREFILL_DATA+l,function(){this._initComposer(n,m,l);}.bind(this));c('ReactComposerPrefillUtils').prefill(l,n.prefillConfig);}else this._initComposer(n,m,l);},_initComposer:function k(l,m,n){c('ReactComposerInit').init(c('ReactFeedSproutsComposerX.react'),l,m);var o=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_done').setEnum('composer_type',l.contextConfig.composerType).getURI();new (c('AsyncRequest'))(o).send();i&&i.release();c('Arbiter').inform('ReactFeedComposerXBootloader/bootload/'+n,l);},_appendPrefillConfig:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?c('ReactComposerAttachmentType').STATUS:arguments[2],o=arguments.length<=3||arguments[3]===undefined?null:arguments[3],p=c('DOM').find(l,"._3en1"),q=c('getActiveElement')()==p||c('CSS').hasClass(c('DOM').find(l,'.focus_target'),'child_was_focused'),r=c('ge')('pagelet_composer')||c('ge')('content')||document,s=c('DOM').scry(r,"._1b3n").length!=0,t=c('CSS').matchesSelector(c('DOM').find(l,"._1cx1"),"._4qr4"),u={text:p.value},v=c('ReactComposerPromptsStore').getMinutiaeData(m),w=o;return {mentionsInput:{textWithEntities:u,selection:c('ReactInputSelection').getSelection(p)},selectedAttachment:s?n:undefined,shouldActivateSelectedAttachment:(q||!!v)&&!w,taggersData:v,selectedTagger:w,expandSproutsOnInit:t};},_getXHPToReactNode:function k(l,m){var n=c('DOM').scry(l,m);if(n.length===0)return null;var o=n[0],p=o.cloneNode(true);o.parentNode.replaceChild(p,o);return o;},_uploadExistingFiles:function k(l,m,n){var o=n.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];c('Bootloader').loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(p,q){p.uploadPhotosOrVideo(m,Array.prototype.slice.call(l),new q(n.contextConfig,o.photoLimit,{disableFaceRecognition:o.disableFaceboxTagger}),n.config.targetData.targetSupportsMultiplePhotos,c('PUWMethods').FILE_SELECTOR,n.config.targetData.targetSupportsMultiMedia,o);},'ReactFeedSproutsComposerXBootloader');},_cleanup:function k(){this._subscriptions.release();for(var l=0;l<this._inputDOMs.length;l++)delete this._inputDOMs[l];delete this._inputDOMs;this._inputDOMs=[];this._prefillSubscription&&this._prefillSubscription.unsubscribe();this._prefillSubscription=null;}};f.exports=j;}),null);
__d('ReactComposerMediaSproutContainer.react',['React','ReactComponentWithPureRenderMixin','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerMediaSprout.react','ReactComposerMediaUploadStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSproutUIConfig'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'ReactComposerMediaSproutContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAttachmentStore'),c('ReactComposerMediaUploadStore'))],propTypes:{config:c('ReactComposerConfig').isRequired,uiConfig:c('ReactComposerSproutUIConfig')},statics:{calculateState:function i(j,k){var l=c('ReactComposerAttachmentStore').getIsAttachmentSelected(j,c('ReactComposerAttachmentType').MEDIA),m=c('ReactComposerMediaUploadStore').getUploadsCount(j);return {highlighted:!!m&&l};}},render:function i(){return c('React').createElement(c('ReactComposerMediaSprout.react'),babelHelpers['extends']({},this.props,this.state));}});f.exports=h;}),null);