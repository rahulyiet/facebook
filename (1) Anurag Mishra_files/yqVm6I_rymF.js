if (self.CavalryLogger) { CavalryLogger.start_js(["uEFXP"]); }

__d("TimelineViewportTrackingLogType",[],(function a(b,c,d,e,f,g){f.exports={IMPRESSION:"impression",DURATION:"duration"};}),null);
__d('FeedBaseKeyboardController',['csx','AccessibilityLogger','Arbiter','AsyncDialog','AsyncRequest','Banzai','BanzaiNectar','BanzaiODS','CSS','DOM','DOMScroll','Event','Focus','KeyboardShortcuts','LikeConfirmer','NavigationMessage','Parent','ReactComposerEvents','ReactComposerIDGenerator','Run','Scroll','SubscriptionsHandler','UITinyViewportAction','Vector','ViewportBounds','emptyFunction','ge','getActiveElement','isAsyncScrollQuery','isElementNode','throttle'],(function a(b,c,d,e,f,g,h){var i=0;function j(){i=c('UITinyViewportAction').isTiny()?0:c('ViewportBounds').getTop();}function k(l){'use strict';this.root=l;this.init();}k.prototype.getStories=function(){'use strict';};k.prototype.getParentStory=function(l){'use strict';};k.prototype.isStory=function(l){'use strict';};k.prototype.isHoldoutStory=function(l){'use strict';};k.prototype.getHeadline=function(l){'use strict';};k.prototype.getPreviousStory=function(l){'use strict';};k.prototype.getNextStory=function(l){'use strict';};k.prototype.setSelected=function(l,m){'use strict';};k.prototype.clickLike=function(){'use strict';};k.prototype.clickComment=function(){'use strict';};k.prototype.clickShare=function(){'use strict';};k.prototype.clickSeeMore=function(){'use strict';};k.prototype.clickLeft=function(){'use strict';};k.prototype.clickRight=function(){'use strict';};k.prototype.openAttachment=function(){'use strict';};k.prototype.focusComposer=function(){'use strict';var l=['pagelet_composer','pagelet_group_composer','pagelet_event_composer','profile_fig_composer','PageComposerPagelet_','PageComposerPagelet_Admin_View'],m=null;for(var n in l){m=c('ge')(l[n]);if(m)break;}if(m){var o=c('DOM').scry(m,'textarea')[0];if(o){c('Focus').set(o);c('DOMScroll').scrollTo(m,true);}else{var p=c('DOM').scry(m,"div._36bx")[0],q=p&&p.id;if(c('ReactComposerIDGenerator').isComposerID(q)){c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+p.id);c('DOMScroll').scrollTo(m,true);}}}};k.prototype.getScrollOffset=function(){'use strict';return 10+(this.scrollOffset||0);};k.prototype.getAnimationLength=function(l){'use strict';return Math.min(Math.abs(c('Vector').getElementPosition(l).y-c('ViewportBounds').getTop()-c('Scroll').getTop(document.body)),400);};k.prototype.findTop=function(){'use strict';var l=this.getStories();for(var m=0;m<l.length;m++)if(c('Vector').getElementPosition(l[m]).y>c('Vector').getScrollPosition().y)return l[m];return null;};k.prototype.onLeave=function(){'use strict';this.subscriptions&&this.subscriptions.release();};k.prototype.getHelpDialogRequest=function(){'use strict';if(!this.dialogRequest){this.dialogRequest=new (c('AsyncRequest'))('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};k.prototype.init=function(){'use strict';c('Run').onLeave(this.onLeave.bind(this));this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,this.onLeave.bind(this)),c('KeyboardShortcuts').register('j',this.vert.bind(this,1)),c('KeyboardShortcuts').register('k',this.vert.bind(this,-1)),c('KeyboardShortcuts').register('l',function(){var l=this.getParentStory(c('getActiveElement')());c('LikeConfirmer').like(function(){this.setSelected(l,false);this.clickLike();}.bind(this),c('getActiveElement')());}.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('p',this.focusComposer.bind(this)),c('KeyboardShortcuts').register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('SLASH',function(){var l=this.getHelpDialogRequest();if(l){l.setRelativeTo(c('getActiveElement')());c('AsyncDialog').send(l);}}.bind(this),{filter:function l(event,m){return event.getModifiers().shift;}}),c('KeyboardShortcuts').register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),c('KeyboardShortcuts').register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),c('KeyboardShortcuts').register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),c('Event').listen(this.root,'focusin',function(event){var l=event.getTarget();if(!this.isStory(l)){var m=c('DOM').isNodeOfType(l,['object','embed','iframe']),n=this.getParentStory(l),o=this.selected;if(n&&!m&&o){this.setSelected(n,true);this.selected=n;}}}.bind(this)));};k.prototype.hasActiveStory=function(event,l){'use strict';var m=c('getActiveElement')();return !(m&&c('CSS').shown(m))||!!this.getParentStory(m);};k.prototype.hasExpandableStoryInFocus=function(event,l){'use strict';var m=c('getActiveElement')();return !!(m.getElementsByClassName('text_exposed_root').length&&!m.getElementsByClassName('text_exposed_root text_exposed').length);};k.prototype.clickElement=function(l){'use strict';if(!l)return;var m=void 0;for(var n=arguments.length,o=Array(n>1?n-1:0),p=1;p<n;p++)o[p-1]=arguments[p];for(var q=0,r=o.length;q<r;q++){m=c('DOM').scry(l,o[q])[0];if(m&&c('CSS').shown(m)){m.click();return;}}};k.prototype.click=function(){'use strict';for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];this.clickElement.apply(this,[this.selected].concat(m));};k.prototype.$FeedBaseKeyboardController1=function(){'use strict';if(!this.$FeedBaseKeyboardController2){this.scrollOffset=0;var l=c('ge')('pagelet_feed_switcher_root');if(l)this.scrollOffset+=l.getBoundingClientRect().height;this.subscriptions.addSubscriptions(c('Event').listen(document,'scroll',function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}.bind(this)));this.$FeedBaseKeyboardController2=true;}};k.prototype.$FeedBaseKeyboardController3=function(){'use strict';if(!this.$FeedBaseKeyboardController4){j();this.subscriptions.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(j)));this.$FeedBaseKeyboardController4=true;}};k.prototype.vert=function(l){'use strict';this.$FeedBaseKeyboardController1();var m,n;if(this.selected){if(c('Banzai').isEnabled('kbshortcuts_feed')){n=l>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';c('BanzaiODS').bumpEntityKey('kbshortcuts_feed',n);c('BanzaiNectar').log('feed_scroll',n,{});}c('AccessibilityLogger').logJKKey();if(this.selected.id=='pagelet_composer'){m=l>0?this.getStories()[0]:null;if(this.isHoldoutStory(m))m=this.getPreviousStory(m);}else if(l===0){m=this.selected;}else m=l>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||c('ge')('pagelet_composer');if(!m){return;}else if(!c('isElementNode')(m)||c('CSS').hasClass(m,'hidden_elem')){c('CSS').removeClass(this.selected,'selectedStorySimple');this.selected=m;this.vert(l);return;}}if(!m||c('Parent').byClass(m,'hidden_elem')||!c('DOM').contains(document,m)){m=this.findTop();if(m&&l<0)m=this.getPreviousStory(m);if(this.isHoldoutStory(m))m=this.getPreviousStory(m);}if(!m)return;this.anim&&this.anim.stop();var o=Date.now()-(this.lastScroll||0)>30,p=c('emptyFunction');if(l!==0)p=this.setFocused.bind(this,m);if(c('isAsyncScrollQuery')()){o=false;p();p=c('emptyFunction');}this.scrolling=true;this.scrollingTimer&&clearTimeout(this.scrollingTimer);this.$FeedBaseKeyboardController3();this.anim=c('DOMScroll').scrollTo(m,o?this.getAnimationLength(m):0,false,c('Vector').getViewportDimensions().y-i-this.getScrollOffset(),0,function(){this.scrollingTimer=setTimeout(function(){this.scrolling=false;}.bind(this),300);var q=c('Vector').getScrollPosition();p();if(q.distanceTo(c('Vector').getScrollPosition())!==0)c('DOMScroll').scrollTo(q,0);}.bind(this));this.setSelected(m,true);this.lastScroll=Date.now();};k.prototype.setTabindexOnStory=function(l,m){'use strict';if(this.isStory(l))l.tabIndex=m;};k.prototype.setFocused=function(l){'use strict';if(this.isStory(l))c('Focus').setWithoutOutline(l);};f.exports=k;}),null);
__d('CtaImpressionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CtaImpressionsLoggerConfig',this.$CtaImpressionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CtaImpressionsLoggerConfig',this.$CtaImpressionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CtaImpressionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CtaImpressionsTypedLogger1=babelHelpers['extends']({},this.$CtaImpressionsTypedLogger1,j);return this;};h.prototype.setCtaType=function(j){this.$CtaImpressionsTypedLogger1.cta_type=j;return this;};h.prototype.setOriginalURI=function(j){this.$CtaImpressionsTypedLogger1.original_uri=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$CtaImpressionsTypedLogger1=babelHelpers['extends']({},this.$CtaImpressionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={cta_type:true,original_uri:true};f.exports=h;}),null);
__d('AsyncLayout',['AjaxPipeRequest','Arbiter','AsyncRequest','AsyncResponse','CSS','FaceliftGating','DOM','HTML','NavigationMessage','PageTransitionsRegistrar','URI','$','emptyFunction','ge','goURI','requireWeak'],(function a(b,c,d,e,f,g){var h;c('requireWeak')('PageTransitions',function(j){h=j;});function i(j){'use strict';this.canvasID=j;if(c('ge')('rightCol'))this.auxiliaryID='rightCol';if(c('ge')('headerArea'))this.headerID='headerArea';if(c('ge')('toolbarContainer'))this.toolbarID='toolbarContainer';this.waitingForAux=false;c('PageTransitionsRegistrar').registerHandler(this.catchPageTransition.bind(this));this.subscription=c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,this.onNavigate.bind(this));c('Arbiter').inform('AsyncLayout/initialized',null,c('Arbiter').BEHAVIOR_STATE);}i.prototype.catchPageTransition=function(j){'use strict';this.subscription.unsubscribe();return false;};i.prototype.getCanvasID=function(j){'use strict';return j.sidecol?'contentCol':'contentArea';};i.prototype.onNavigate=function(j,k){'use strict';var l=k.useAjaxPipe;k=k.params;if(k.endpoint){if(this.request){this.request.setFinallyHandler(c('emptyFunction'));this.request.abort();}if(l){k.xui_grid=c('FaceliftGating').hasXUIGrid;this.request=new (c('AjaxPipeRequest'))().setURI(k.endpoint).setData(k).setCanvasId(this.getCanvasID(k)).setFinallyHandler(this.finallyHandler.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFirstResponseCallback(this.firstResponseCallback.bind(this)).send();}else{k.handled=true;this.waitingForAux=k.sidecol;var m=!!k.iframe,n=new (c('AsyncRequest'))().setOption('useIframeTransport',m).setURI(new (c('URI'))(k.endpoint)).setReadOnly(true).setMethod('GET').setData(k).setHandler(this.onResponse.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setFinallyHandler(this.finallyHandler.bind(this));this.request=n;n.send();}}};i.prototype.receivedAux=function(j){'use strict';!this.waitingForAux;this.waitingForAux=false;c('DOM').setContent(c('$')(this.auxiliaryID),c('HTML')(j));};i.prototype.onResponse=function(j){'use strict';var k=j.getPayload();if(k.redirect){c('goURI')(k.redirect);}else{var l=k.html||k;c('DOM').setContent(c('$')(this.canvasID),c('HTML')(l));if(k.side_html&&this.auxiliaryID)this.receivedAux(k.side_html);if(this.headerID&&!k.keep_header){var m=c('$')(this.headerID);c('DOM').setContent(m,c('HTML')(k.header_html||''));c('CSS').conditionShow(m,k.header_html);}if(k.toolbar_html&&this.toolbarID)c('DOM').setContent(c('$')(this.toolbarID),c('HTML')(k.toolbar_html));if(k.js)new Function(k.js)();c('CSS').conditionClass(c('$')('contentCol'),'hasRightCol',this.auxiliaryID&&!k.noRightSide);var n=c('ge')('rightCol');if(n&&k.noRightSide)c('DOM').empty(n);}var o=j.getRequest().getData();c('Arbiter').inform(c('NavigationMessage').NAVIGATION_COMPLETED,o.key);};i.prototype.errorHandler=function(j){'use strict';c('AsyncResponse').verboseErrorHandler(j);c('Arbiter').inform(c('NavigationMessage').NAVIGATION_FAILED);this.request=null;};i.prototype.firstResponseCallback=function(j){'use strict';window.scrollTo(0,0);c('Arbiter').inform(c('NavigationMessage').NAVIGATION_FIRST_RESPONSE);};i.prototype.finallyHandler=function(j){'use strict';this.request=null;if(h)h.transitionComplete(true);c('Arbiter').inform(c('NavigationMessage').NAVIGATION_COMPLETED);};f.exports=i;}),null);
__d('DimensionLogging',['BanzaiNectar','getViewportDimensions'],(function a(b,c,d,e,f,g){var h=c('getViewportDimensions')();c('BanzaiNectar').log('browser_dimension','homeload',{x:h.width,y:h.height,sw:window.screen.width,sh:window.screen.height,aw:window.screen.availWidth,ah:window.screen.availHeight,at:window.screen.availTop,al:window.screen.availLeft});}),null);
__d('PostsCtaModern',['CtaImpressionsTypedLogger','Animation','Style'],(function a(b,c,d,e,f,g){var h=150,i=255,j={show:function k(l,m,n,o){c('Style').set(document.body,'margin-bottom',i+'px');var p=setInterval(q,2500);o.addEventListener('click',function(){c('Style').set(n,'display','none');c('Style').set(l,'height','70%');c('Style').set(m,'display','block');c('Style').set(l,'background','none');r(l,'height',i+'px');clearInterval(p);});function q(){if(document.documentElement!==null){var s=s=document.documentElement.clientHeight,t=l.clientHeight;if(t!==s){c('Style').set(m,'display','none');c('Style').set(n,'display','block');r(l,'height',s+'px');r(l,'background','rgba(0,0,0,0.5)');var u=new (c('CtaImpressionsTypedLogger'))();u.setCtaType('www_permalink_cta');u.setOriginalURI(window.location.href);u.logVital();}}}function r(s,t,u){new (c('Animation'))(s).to(t,u).duration(h).ease(c('Animation').ease.both).go();}}};f.exports=j;}),null);
__d('ViewportTrackingHooks',['Base64'],(function a(b,c,d,e,f,g){var h={},i=[],j={registerFeedObject:function k(l,m){h[l]=c('Base64').encode(m);},updateVisibleViewportObjects:function k(l){var m=[],n=false;for(var o=0;o<l.length;o++){var p=l[o],q=p.id;while(!(q in h)&&p.firstChild!=undefined&&p.firstChild.id!=undefined&&p.firstChild.id.startsWith("u_")){q=p.firstChild.id;p=p.firstChild;}if(q in h){m.push(h[q]);if(!(o in i)||i[o]!=h[q])n=true;}}if(!n&&i.length!=m.length)n=true;if(n){i=m;if(typeof __EXT__updateVisibleViewportObjects==='function')__EXT__updateVisibleViewportObjects(i);}}};f.exports=j;}),null);
__d('viewportTrackingBuilder',[],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){var k=null;return {factory:j,singleton:function l(){if(!k)k=j.apply(undefined,arguments);return k;},clearSingleton:function l(){k=null;}};};f.exports=h;}),null);
__d('ViewportTracking',['cx','invariant','Arbiter','Banzai','BanzaiScuba','CSS','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','Run','SubscriptionsHandler','TimeSlice','UserActivity','ViewportTrackingHelper','ViewportTrackingHooks','clickRefAction','collectDataAttributes','debounce','getElementPosition','getViewportDimensions','throttle','viewportTrackingBuilder','setTimeout'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=97,k='vpv',l=3,m=2,n=1,o=0,p=1,q=2,r=3,s=4;function t(w){this.cachedAllStories=[];this.cachedVisibleStories={init:false,data:{}};this.fireTimer=this.fireTimer.bind(this);this.logAnnotatedVPV=this.logAnnotatedVPV.bind(this);this.markStoryRead=this.markStoryRead.bind(this);this.behavior=w;}t.prototype.init=function(w){this.useBanzai=true;this.vpvDebug=!!w.vpv_debug;this.vpvdDebug=!!w.vpvd_debug;this.vpvdAnalysis=!!w.vpvd_analysis;this.trackingHooks=!!w.tracking_hooks;this.ctaLoggingEnabled=!!w.cta_logging_enabled;this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=c('getViewportDimensions')().height;this.isTimetrackingEnabled=false;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;if(this.behavior.getDataFromConfig)this.behavior.getDataFromConfig(w,this);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=q;this.latestUserFocus=q;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}if(w.tracking_duration_config){this.scrollThrottlingInterval=w.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=w.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=w.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=w.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=w.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=w.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=w.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=w.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=w.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=w.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=w.tracking_duration_config.discard_vpvd_interval_threshold;}w.record_delay!==undefined||i(0);var x=c('debounce')(this.fireTimer,w.record_delay,this);this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(this._getScrollListener(x),c('Event').listen(window,'resize',function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=c('getViewportDimensions')().height;x();}.bind(this)),c('Event').listen(window,'focus',function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}.bind(this)),c('Event').listen(window,'blur',function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}.bind(this)),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,this.cleanup.bind(this)),c('Arbiter').subscribe('Stream/totalHeadLoadedStories',function(ba,ca){this._headLoadStoryCount=ca.count;}.bind(this)),c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,function(){if(!this.initialStoriesLogged){var ba=this.getStoriesInView();ba.forEach(this.logAnnotatedVPV,this);}else x();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}.bind(this)));if(this.isTimetrackingEnabled&&this.behavior.getStream){this.updateTimeTrackingData(false,'init');var y=c('throttle')(function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}.bind(this),this.scrollThrottlingInterval),z=c('throttle')(function(event){return this.handleKeyboard(event);}.bind(this),this.keyboardThrottlingInterval),aa=c('throttle')(function(event){return this.handleMouse(event);}.bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(c('Event').listen(window,'scroll',y),c('Event').listen(document.documentElement,'DOMMouseScroll',y,undefined,{passive:true}),c('Event').listen(document.documentElement,'mousewheel',y,undefined,{passive:true}),c('Event').listen(document.documentElement,'keydown',z),c('Event').listen(document.documentElement,'mouseover',aa),c('Event').listen(document.documentElement,'mousemove',aa),c('Event').listen(document.documentElement,'click',function(event){this.handleMouse(event);}.bind(this)),c('Arbiter').subscribe('Event/stop',function(ba,ca){this.handleMouse(ca.event);}.bind(this)),c('Arbiter').subscribe('PhotoSnowlift.OPEN',function(){this.userFocus=r;this.handleLayers();}.bind(this)),c('Arbiter').subscribe('PhotoSnowlift.CLOSE',function(){this.userFocus=p;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}.bind(this)));this._userActivityPoller();}c('Run').onLeave(this.cleanup.bind(this));c('Run').onUnload(this.cleanup.bind(this));};t.prototype._getScrollListener=function(w){return c('Event').listen(window,'scroll',w);};t.prototype.cleanup=function(){if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.annotatedVPVLogging){var w=this.getStoriesInView();w.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};t.prototype.fireTimer=function(){if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.trackingHooks){var w=this.isTimetrackingEnabled?this.getVisibleStoriesFromCache():this.getAllStoriesInView(),x=[],y=Object.keys(w);for(var z=0,aa=y.length;z<aa;z++){var ba=y[z];if(w[ba].story)x.push(w[ba].story);}c('ViewportTrackingHooks').updateVisibleViewportObjects(x);}};t.prototype.getSessionID=function(){return null;};t.prototype._userActivityPoller=function(){if(!this.userInactiveLock&&!c('UserActivity').isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=q;this.updateTimeTrackingData(false,'user_activity_inactive');c('UserActivity').subscribeOnce(function(){this.userFocus=p;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}.bind(this));}this.userActivityPollerTimeoutID=c('setTimeout')(c('TimeSlice').guard(this._userActivityPoller.bind(this),'ViewportTracking poll setTimeout',{isContinuation:false}),this.userActivityPollingInterval);};t.prototype.getQueryID=function(w){return -1;};t.prototype.getFBFeedLocations=function(w){return -1;};t.prototype.getFBFeedInsertionPosition=function(w){return -1;};t.prototype.createVPVDTimer=function(w){var x=document.createElement('label');x.setAttribute('for',w.toString());x.setAttribute('class','vpvd_debug_timer');return x;};t.prototype.updateVPVDTimer=function(w){var x=this.activeStories[w].story;if(!x)return;var y=c('DOM').scry(x,'.vpvd_debug_timer');if(!y.length){y=[this.createVPVDTimer(x),this.createVPVDTimer(x)];var z=c('DOM').scry(x,'.UFIRow');if(z.length&&z[z.length-1].clientWidth>0){z[z.length-1].appendChild(y[0]);}else x.appendChild(y[0]);x.insertBefore(y[1],x.firstChild);}var aa=this.totalVPVDuration[w],ba=Math.floor(aa/1000)+'.'+Math.floor(aa%1000/100);c('DOM').setContent(y[0],ba);c('DOM').setContent(y[1],ba);};t.prototype.updateVPVDTimers=function(){for(var w in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,w))this.updateVPVDTimer(w);};t.prototype.logVpvdAnalysis=function(w,x,y,z,aa,ba){var ca=new (c('BanzaiScuba'))('vpv_duration');ca.addDenorm('qid',this.getQueryID(this.activeStories[w].story));ca.addDenorm('uid',c('CurrentUser').getID());ca.addDenorm('vsid',w);ca.addInteger('time',Math.round(Date.now()/1000));ca.addInteger('duration',z);ca.addInteger('total_duration',aa);ca.addNormal('story_state',this.activeStories[w].state);ca.addNormal('is_active_state',y);ca.addNormal('num_visible_stories',this.numVisibleStories);ca.addInteger('story_height',this.activeStories[w].story_height);ca.addInteger('story_visible_height',this.activeStories[w].height);ca.addInteger('state_visible_height',ba);ca.addInteger('total_visible_height',this.totalVisibleHeight);ca.addInteger('total_height',this.totalHeight);ca.addNormal('user_focus',this.latestUserFocus);ca.addNormal('next_user_focus',this.userFocus);ca.addInteger('vpvd',x);ca.addInteger('accumulated_vpvd',this.activeStories[w].vpvd);ca.addNormal('user_activity',this.latestUserActivity);ca.addNormal('next_user_activity',this.userActivity);ca.addInteger('story_position_y',this.activeStories[w].y);ca.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[w].story));ca.addNormal('visible_position',this.activeStories[w].visible_position);ca.addNormal('is_focused_story',this.activeStories[w].is_focused);ca.post();};t.prototype.shouldDiscardStory=function(w){var x=this.activeStories[w].height||0;return x!=this.activeStories[w].story_height&&x<this.totalHeight/2;};t.prototype.calculateTotalHeight=function(){this.totalHeight=0;for(var w in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,w))this.totalHeight+=this.activeStories[w].height;};t.prototype.updateVPVDurations=function(w){var x;if(this.latestUserFocus===q||w-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var y=(x={},x[n]=0,x[m]=0,x[l]=0,x),z=w-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var aa in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,aa))if(!(this.latestUserFocus===p&&z&&this.shouldDiscardStory(aa))){var ba=this.activeStories[aa].state||null,ca=this.activeStories[aa].height||0;if(ba!==null&&Object.prototype.hasOwnProperty.call(y,ba))y[ba]+=ca;this.totalVisibleHeight+=ca;}var da=0,ea=w-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===p){ea=y[l]>0?this.focused_state_duration:this.active_state_duration;ea=Math.min(ea,w-this.latestTimeTrackingTimestamp);da=w-this.latestTimeTrackingTimestamp-ea;}var fa=0,ga=l;for(var ha=l;ha>=n;ha--)if(y[ha]>0){fa=y[ha];ga=ha;break;}var ia=y[l]+y[m]+y[n],ja=0;for(aa in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,aa)){if(this.latestUserFocus===p&&z&&this.shouldDiscardStory(aa))continue;var ka=this.activeStories[aa].state||o;if(fa>0&&ka>=ga){var la=this.activeStories[aa].height||0;ja=ea*(la/fa);if(this.vpvdAnalysis&&ea>0)this.logVpvdAnalysis(aa,ja,true,ea,ea+da,fa);this.activeStories[aa].vpvd+=ja;this.totalVPVDuration[aa]+=ja;}if(ia>0){var ma=this.activeStories[aa].height||0;ja=da*(ma/ia);if(this.vpvdAnalysis&&da>0)this.logVpvdAnalysis(aa,ja,false,da,ea+da,ia);this.activeStories[aa].vpvd+=ja;this.totalVPVDuration[aa]+=ja;}}};t.prototype.updateActiveStory=function(w,x,y,z){this.activeStories[w].state=x;this.activeStories[w].ts=y;this.activeStories[w].height_snapshot=z[w].height;this.activeStories[w].is_focused=this.focusedStory===z[w].story;this.activeStories[w].story_height=z[w].story_height;if(this.vpvdAnalysis){this.activeStories[w].visible_position=z[w].visible_position;this.activeStories[w].y=z[w].y;}};t.prototype.updateActiveStories=function(w,x){for(var y in w)if(Object.prototype.hasOwnProperty.call(w,y))if(y in this.activeStories){var z=w[y].height||0;this.activeStories[y].height=z;var aa=z-(this.activeStories[y].height_snapshot||0);if(this.focusedStory===w[y].story){this.updateActiveStory(y,l,x,w);}else if(aa<=-this.height_diff_to_change_state){this.updateActiveStory(y,this.shouldDiscardStory(y)?o:n,x,w);}else if(aa>=this.height_diff_to_change_state||this.activeStories[y].is_focused||this.activeStories[y].height===this.activeStories[y].story_height)this.updateActiveStory(y,m,x,w);}else{this.activeStories[y]={evp_ts:x,story:w[y].story,height:w[y].height,vpvd:0};if(!this.totalVPVDuration[y])this.totalVPVDuration[y]=0;this.updateActiveStory(y,m,x,w);}};t.prototype.recordVPVDurations=function(w,x){for(var y in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,y))if(x||!(y in w)){var z=this.activeStories[y].vpvd||0;if(z>this.focused_state_duration||z===this.totalVPVDuration[y])this.recordTimeStoryWasInView(this.activeStories[y]);delete this.activeStories[y];}};t.prototype.updateTimeTrackingData=function(w,x){this.userActivity=x;if(!this.activeStories)this.activeStories={};var y=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=y;var z=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(y);this.updateActiveStories(z,y);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(z,w);if(w){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=y;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};t.prototype.needsToUpdateTimeTrackingData=function(){return !(this.latestUserFocus===this.userFocus&&(this.userFocus===q||this.userFocus===p&&!this.latestFocusedStory&&!this.focusedStory));};t.prototype.getfocusedStory=function(w){var x=this.getVisibleStoriesFromCache();for(var y in x)if(Object.prototype.hasOwnProperty.call(x,y)){var z=x[y].story;if(z&&c('ViewportTrackingHelper').isDescendantOf(w,z))return z;}return null;};t.prototype.handleLayers=function(){if(this.userFocus===r||this.userFocus===s){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};t.prototype.didInteractWithStream=function(w){if(!this.behavior.getStream)return false;var x=this.behavior.getStream();return c('ViewportTrackingHelper').isDescendantOf(w,x)||c('ViewportTrackingHelper').isDescendantOf(x,w);};t.prototype.handleScroll=function(event){if(this.handleLayers())return;var w=Date.now();this.behavior.getStream||i(0);var x=c('getElementPosition')(this.behavior.getStream()).y;if(x!=this.lastStreamY||w-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=w;this.userFocus=p;}else this.userFocus=q;this.lastStreamY=x;if(this.userFocus===p||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};t.prototype.handleKeyboard=function(event){if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=p;this.focusedStory=this.getfocusedStory(event.target);}else if(c('CSS').hasClass(event.target,'shareInput')){this.userFocus=p;this.focusedStory=this.latestActiveStory;}else this.userFocus=q;if(this.userFocus===p||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};t.prototype.handleMouse=function(event){if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=p;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=q;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};t.prototype.getStoriesInView=function(){var w=this.behavior.getAllStories(),x=[],y=false;for(var z=0;z<w.length;z++){var aa=w[z],ba=this.behavior.getStoryID(aa);if(ba&&this.hasBeenVisible(ba))continue;if(c('ViewportTrackingHelper').isVisible(aa,this.minSizeToBeVisible)){if(aa.getAttribute('data-insertion-position')===null)aa.setAttribute('data-insertion-position',(z-this._headLoadStoryCount).toString());x.push(aa);y=true;}else if(y)break;}return x;};t.prototype.getAllStoriesFromCache=function(){if(this.cachedAllStories.length===0)this.cachedAllStories=this.behavior.getAllStories();return this.cachedAllStories;};t.prototype.invalidateAllStoriesCache=function(){this.cachedAllStories=[];this.invalidateVisibleStoriesCache();};t.prototype.getVisibleStoriesFromCache=function(){if(!this.cachedVisibleStories.init)this.cachedVisibleStories={init:true,data:this.getAllStoriesInView()};return this.cachedVisibleStories.data;};t.prototype.invalidateVisibleStoriesCache=function(){this.cachedVisibleStories={init:false,data:{}};};t.prototype.getAllStoriesInView=function(){var w=this.getAllStoriesFromCache(),x={},y=false,z=0,aa=w.length,ba=1,ca=w.length;if(this._indexOfLastVisibleStoryOnPreviousPass>aa/2){z=aa-1;aa=-1;ba=-ba;}for(var da=z;da!=aa;da+=ba){var ea=w[da],fa=c('ViewportTrackingHelper').getHeightIfVisible(ea,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*c('DOMDimensions').getElementDimensions(ea).height));if(fa>0||ea===this.focusedStory){if(ea.getAttribute('data-insertion-position')===null)ea.setAttribute('data-insertion-position',(da-this._headLoadStoryCount).toString());var ga=this.behavior.getStoryID(ea);if(ga){x[ga]={story:ea,height:fa,story_height:c('DOMDimensions').getElementDimensions(ea).height};y=true;if(this.vpvdAnalysis){x[ga].y=c('getElementPosition')(ea).y;x[ga].visible_position=da;ca=Math.min(ca,da);}}}else if(y){this._indexOfLastVisibleStoryOnPreviousPass=da-ba;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(ga in x)if(Object.prototype.hasOwnProperty.call(x,ga)){x[ga].visible_position-=ca;this.numVisibleStories++;}}return x;};t.prototype.getTimetrackingDataToLog=function(w){var x={evt:j,vpvd_start_timestamp:w.evp_ts||null,vpvd_time_delta:Math.round(w.vpvd||0),story_height:c('DOMDimensions').getElementDimensions(w.story).height,viewport_height:this.cachedViewportHeight};return {ft:x};};t.prototype.recordTimeStoryWasInView=function(w){if(!this.isTimetrackingEnabled)return;if(!w.vpvd||!w.story)return;if(w.vpvd>0){var x=this.getTimetrackingDataToLog(w),y=c('collectDataAttributes')(w.story,['ft']);Object.assign(x.ft,y.ft);var z=!!y.ft.ei&&x.ft.vpvd_time_delta>this.minTimeToReportImmediately;if(x.ei)delete x.ei;w.story||i(0);this.sendDataToLog(w.story,x,z);}};t.prototype.hasBeenVisible=function(w){return w in this.readStoryIDs;};t.prototype.sendDataToLog=function(w,x,y){if(this.useBanzai){var z={};if(y)z.delay=3000;var aa=this.getSessionID();if(aa)x.ft.session_id=aa;c('Banzai').post('feed_tracking',x,z);}else c('clickRefAction')(k,w,null,'FORCE',x);};t.prototype.markStoryRead=function(w){var x=this.behavior.getStoryID(w);if(!x||this.hasBeenVisible(x))return;this.readStoryIDs[x]=true;this.annotatedStoryIDs[x]=true;var y=this._getDataToLogImpl(w),z=c('collectDataAttributes')(w,['ft']);Object.assign(y.ft,z.ft);delete y.ei;this.sendDataToLog(w,y,false);if(this.vpvDebug)c('CSS').addClass(w,"_5m7s");};t.prototype.logAnnotatedVPV=function(w){var x=this.behavior.getStoryID(w);if(!x||x in this.annotatedStoryIDs)return;this.annotatedStoryIDs[x]=true;var y=this._getDataToLogImpl(w),z=c('collectDataAttributes')(w,['ft']);Object.assign(y.ft,z.ft);delete y.ei;y.ft.vpv_ft_only=1;this.sendDataToLog(w,y,false);};t.prototype._getDataToLogImpl=function(w){var x=this.behavior.getDataToLog(w);if(!x.ft)x.ft={};return x;};t.clearSingleton=function(){};var u={getAllStories:function w(){return [];},getStoryID:function w(x){return null;},getDataToLog:function w(x){return {};}},v=c('viewportTrackingBuilder')(function(w){return new t(u);});t.factory=v.factory.bind(v);t.singleton=v.singleton.bind(v);t.clearSingleton=v.clearSingleton.bind(v);t.getBehavior=function(){return u;};f.exports=t;}),null);
__d('collectSubtreeData',[],(function a(b,c,d,e,f,g){function h(j,k,l,m,n){if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push('('+q[r]);}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n);}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=='('){n[u][v][n[u][v].length-1]=w.substr(1);}else n[u][v].push(')');}return n;}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]='data-'+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join('');return o;}f.exports=i;}),null);
__d('recordTNTreeData',['collectSubtreeData'],(function a(b,c,d,e,f,g){function h(i,j){var k={},l=c('collectSubtreeData')(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k;}f.exports=h;}),null);
__d('StreamViewportTracking',['DataAttributeUtils','DOM','DOMDimensions','ViewportTracking','ge','recordTNTreeData','viewportTrackingBuilder'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=51;function k(n,o,p){var q=arguments.length<=3||arguments[3]===undefined?j:arguments[3];return {_stream:null,getDataFromConfig:function r(s,t){t.isTimetrackingEnabled=true;},getAllStories:function r(){var s=c('DOM').scry(this.getStream(),p);return s.filter(function(t){return c('DataAttributeUtils').getDataFt(t);});},getStream:function r(){if(o)return o;if(!this._stream)this._stream=c('ge')('home_stream');return this._stream;},getStoryID:function r(s){var t=JSON.parse(c('DataAttributeUtils').getDataFt(s));return t&&t.mf_story_key;},getDataToLog:function r(s){var t=this.getStream(),u=c('recordTNTreeData')(s,t),v=s.getAttribute('data-insertion-position');if(v!==null)u.inspos=v;u.evt=q;u.vpv_time=Math.round(Date.now()/1000);var w=c('DOM').scry(s,'.fbStoryAttachmentImage')[0];if(w){var x=c('DOMDimensions').getElementDimensions(w);u.story_image_height=x.height;u.story_image_width=x.width;}return {ft:u};}};}h=babelHelpers.inherits(l,c('ViewportTracking'));i=h&&h.prototype;l.prototype.getQueryID=function(n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(n));return o.qid;};l.prototype.getFBFeedLocations=function(n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(n));return o.fbfeed_location;};l.prototype.getFBFeedInsertionPosition=function(n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(n));return o.insertion_position;};l.prototype.getTimetrackingDataToLog=function(n){var o=i.getTimetrackingDataToLog.call(this,n);if(this.ctaLoggingEnabled){var p=c('DOM').scry(n.story,'[data-is-cta]').map(function(q){var r=c('DataAttributeUtils').getDataFt(q),s=r&&JSON.parse(r);return s&&s.cta_types;}).filter(function(q){return !!q;});if(p.length>0)o.ft.cta_types=p;}return o;};l.prototype.cleanup=function(){m.clearSingleton();i.cleanup.call(this);};function l(){h.apply(this,arguments);}var m=c('viewportTrackingBuilder')(function(n,o){var p=new l(k(n,o,'.uiStreamStory'));p.init(n);return p;});l.factory=m.factory.bind(m);l.singleton=m.singleton.bind(m);l.clearSingleton=m.clearSingleton.bind(m);l.getBehavior=k;f.exports=l;}),null);
__d('FbFeedKeyboardController',['csx','cx','CSS','DOM','DOMQuery','FbFeedHighlight','FeedBaseKeyboardController','Focus','JSXDOM','Parent','ge','getActiveElement'],(function a(b,c,d,e,f,g,h,i){var j,k;function l(o){if(o.previousElementSibling instanceof HTMLElement)return o.previousElementSibling;var p=o.previousSibling;while(p&&!(p instanceof HTMLElement))p=p.previousSibling;return p||null;}function m(o){if(o.nextElementSibling instanceof HTMLElement)return o.nextElementSibling;var p=o.nextSibling;while(p&&!(p instanceof HTMLElement))p=p.nextSibling;return p||null;}j=babelHelpers.inherits(n,c('FeedBaseKeyboardController'));k=j&&j.prototype;n.prototype.getStories=function(o){'use strict';return c('DOMQuery').scry(o||this.root,"._5jmm");};n.prototype.isHoldoutStory=function(o){'use strict';return !!o&&c('CSS').hasClass(o,'holdoutAdStory');};n.prototype.isRelevantStory=function(o){'use strict';return o instanceof HTMLElement&&!this.isHoldoutStory(o);};n.prototype.isStory=function(o){'use strict';return c('CSS').matchesSelector(o,"._5jmm");};n.prototype.clickLike=function(){'use strict';var o=this.$FbFeedKeyboardController1();this.clickElement(o,'.UFILikeLink');if(o!==this.selected)return;var p=this.getParentStory(c('getActiveElement')());if(p){var q=c('DOMQuery').scry(p,'.UFILikeLink');for(var r=0;r<q.length;r++)if(!c('CSS').hasClass(q[r],'accessible_elem'))c('Focus').setWithoutOutline(q[r]);}};n.prototype.clickComment=function(){'use strict';this.clickElement(this.$FbFeedKeyboardController1(),'.comment_link');};n.prototype.clickShare=function(){'use strict';this.click('.share_action_link');};n.prototype.clickSeeMore=function(){'use strict';this.click('.see_more_link');};n.prototype.clickLeft=function(){'use strict';this.click("._1mri");};n.prototype.clickRight=function(){'use strict';this.click("._2fu-");};n.prototype.openAttachment=function(){'use strict';this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};n.prototype.getHeadline=function(o){'use strict';return c('DOMQuery').scry(o,"h5._5pbw")[0];};n.prototype.$FbFeedKeyboardController2=function(o){'use strict';var p=c('Parent').bySelector(o,"._5pcb"),q=c('ge')('pagelet_soft_permalink_posts');return !!(p||q&&c('DOM').contains(q,o));};n.prototype.getPreviousSibling=function(o){'use strict';var p=l(o);if(p&&this.getParentStory(p))return p;p=null;if(this.$FbFeedKeyboardController2(o)){var q=this.getStories(this.root),r=q.indexOf(o);while(r>-1){if(r===0){p=c('ge')('pagelet_composer');p=p&&c('Parent').bySelector(p,"._5jmm");}else if(r>0){p=q[r-1];if(p.offsetHeight>0)break;}r--;}}if(p instanceof HTMLElement)return p;return this.selected;};n.prototype.getPreviousStory=function(o){'use strict';var p=this.getPreviousSibling(o);while(p&&!this.isStory(p))p=this.getPreviousSibling(p);return p;};n.prototype.getParentStory=function(o){'use strict';var p=c('Parent').bySelector(o,"._5jmm");return p instanceof HTMLElement?p:null;};n.prototype.getNextSibling=function(o){'use strict';var p=m(o);if(p&&this.getParentStory(p))return p;p=null;if(this.$FbFeedKeyboardController2(o)){var q=this.getStories(this.root),r=q.indexOf(o);if(r>-1){p=q[++r];while(p&&p.offsetHeight===0)p=q[++r];}}else if(c('ge')('pagelet_composer',o))p=c('DOMQuery').scry(document,"div._5pcb ._5jmm")[0];return p||this.selected;};n.prototype.getNextStory=function(o){'use strict';var p=this.getNextSibling(o);while(p&&!this.isStory(p))p=this.getNextSibling(p);return p;};n.prototype.setSelected=function(o,p){'use strict';if(o){var q="_5qdu",r=c('DOMQuery').scry(o,"._5qdu");if(!r.length&&p)c('DOM').prependContent(o,c('JSXDOM').div({className:q}));}if(p){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&c('CSS').removeClass(this.selected,"_5qdv");this.selected=o;o&&this.setTabindexOnStory(o,'0');o&&c('CSS').addClass(o,"_5qdv");o&&c('FbFeedHighlight').highlightSingle(o);}};n.prototype.$FbFeedKeyboardController1=function(){'use strict';var o=c('DOM').scry(this.selected,"._1qch");if(o.length>0)return c('DOM').scry(this.selected,"._3el7")[0];return this.selected;};n.init=function(o){'use strict';return new n(o);};function n(){'use strict';j.apply(this,arguments);}f.exports=n;}),null);